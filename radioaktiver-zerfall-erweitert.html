<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radioaktiver Zerfall â€“ Anwendung der e-Funktion</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 5px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            font-size: 1.1em;
            margin-bottom: 25px;
        }
        .context-box {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 4px solid #ff9800;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 0 10px 10px 0;
        }
        .context-box h3 {
            margin-top: 0;
            color: #e65100;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .formula-highlight {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 15px 0;
            font-size: 1.2em;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .math {
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }
        .graph-section {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        canvas {
            display: block;
            margin: 0 auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }
        .legend-line {
            width: 30px;
            height: 3px;
        }
        .legend-line.solid { background: currentColor; }
        .legend-line.dashed { 
            background: repeating-linear-gradient(90deg, currentColor 0px, currentColor 5px, transparent 5px, transparent 10px);
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        .slider-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 20px;
            border-radius: 10px;
            min-width: 220px;
        }
        .slider-group.isotope { 
            background: #e8f5e9; 
            border: 2px solid #4CAF50; 
        }
        .slider-group.time { 
            background: #e3f2fd; 
            border: 2px solid #2196F3; 
        }
        .slider-group.initial { 
            background: #fce4ec; 
            border: 2px solid #E91E63; 
        }
        .slider-group h4 {
            margin: 0 0 10px 0;
            font-size: 0.95em;
        }
        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .slider-container label {
            font-weight: bold;
            min-width: 30px;
        }
        input[type="range"] {
            width: 120px;
            cursor: pointer;
        }
        .value-display {
            min-width: 70px;
            font-family: monospace;
            font-size: 1.1em;
            font-weight: bold;
        }
        .info-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .info-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .info-card.amount { border-top: 4px solid #4CAF50; }
        .info-card.rate { border-top: 4px solid #f44336; }
        .info-card.halflife { border-top: 4px solid #9c27b0; }
        .info-card.activity { border-top: 4px solid #ff9800; }
        .info-label {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 5px;
        }
        .info-value {
            font-size: 1.4em;
            font-weight: bold;
            font-family: monospace;
        }
        .info-unit {
            font-size: 0.8em;
            color: #888;
        }
        .interpretation-box {
            background: #e8f5e9;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .interpretation-box h3 {
            margin-top: 0;
            color: #2e7d32;
        }
        .interpretation-box .highlight {
            background: #c8e6c9;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        .task-box {
            background: #fff8e1;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .task-box h3 {
            margin-top: 0;
            color: #f57f17;
        }
        .task-box ol {
            margin-bottom: 0;
        }
        .task-box li {
            margin: 10px 0;
        }
        .isotope-info {
            font-size: 0.85em;
            color: #666;
            margin-top: 8px;
        }
        select {
            padding: 8px 12px;
            font-size: 1em;
            border-radius: 5px;
            border: 2px solid #4CAF50;
            background: white;
            cursor: pointer;
        }
        .derivative-explanation {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .derivative-explanation h3 {
            margin-top: 0;
            color: #1565c0;
        }
        .equation-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 1.1em;
        }
        .extension-ideas {
            background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        .extension-ideas h3 {
            margin-top: 0;
            color: #303f9f;
        }
        .idea-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .idea-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            cursor: pointer;
        }
        .idea-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .idea-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }
        .idea-title {
            font-weight: bold;
            color: #303f9f;
            margin-bottom: 5px;
        }
        .idea-desc {
            font-size: 0.85em;
            color: #666;
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }
        .idea-hint {
            font-size: 0.75em;
            color: #999;
            margin-top: 8px;
        }
        /* Modal fÃ¼r Beispielaufgaben */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal-content {
            background: white;
            border-radius: 15px;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5em;
            cursor: pointer;
            color: #999;
            transition: color 0.2s;
        }
        .modal-close:hover {
            color: #333;
        }
        .modal-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        .modal-icon {
            font-size: 2.5em;
        }
        .modal-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #303f9f;
        }
        .modal-formula {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2em;
            margin: 15px 0;
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }
        .modal-task {
            background: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .modal-task h4 {
            margin-top: 0;
            color: #f57f17;
        }
        .modal-solution {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            display: none;
        }
        .modal-solution.visible {
            display: block;
        }
        .modal-solution h4 {
            margin-top: 0;
            color: #2e7d32;
        }
        .solution-step {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        .solution-result {
            font-weight: bold;
            color: #2e7d32;
            font-size: 1.1em;
        }
        .modal-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 10px;
            transition: transform 0.2s;
        }
        .modal-btn:hover {
            transform: scale(1.05);
        }
        /* Rechenaufgaben Styles */
        .exercise-section {
            background: #fafafa;
            border: 2px solid #9c27b0;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }
        .exercise-section h2 {
            color: #7b1fa2;
            margin-top: 0;
            padding-bottom: 15px;
            border-bottom: 2px solid #e1bee7;
        }
        .exercise-context {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #9c27b0;
            font-size: 1.05em;
        }
        .exercise-part {
            margin: 15px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .exercise-header {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.3s;
        }
        .exercise-header:hover {
            background: linear-gradient(135deg, #e1bee7 0%, #ce93d8 100%);
        }
        .exercise-number {
            background: #9c27b0;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        .exercise-question {
            flex: 1;
            font-weight: 500;
        }
        .toggle-icon {
            color: #7b1fa2;
            font-size: 0.9em;
        }
        .hint-solution-container {
            background: white;
            padding: 15px 20px;
        }
        .hint, .solution {
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .hint {
            background: #fff8e1;
            border: 1px solid #ffca28;
        }
        .hint:hover {
            background: #ffecb3;
        }
        .solution {
            background: #e8f5e9;
            border: 1px solid #66bb6a;
        }
        .solution:hover {
            background: #c8e6c9;
        }
        .hint-content {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed currentColor;
        }
        .hint .hint-content {
            border-color: #ffca28;
        }
        .solution .hint-content {
            border-color: #66bb6a;
        }
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.95em;
        }
        .result-table th, .result-table td {
            padding: 10px 12px;
            border: 1px solid #ddd;
            text-align: center;
        }
        .result-table th {
            background: #f5f5f5;
            font-weight: bold;
        }
        .result-table tr:nth-child(even) {
            background: #fafafa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>â˜¢ï¸ Radioaktiver Zerfall</h1>
        <p class="subtitle">Die e-Funktion und ihre Ableitung in der Anwendung</p>
        
        <div class="context-box">
            <h3>âš›ï¸ Physikalischer Hintergrund</h3>
            <p>Radioaktive Stoffe zerfallen exponentiell. Die Anzahl der noch vorhandenen Atomkerne N(t) zum Zeitpunkt t wird beschrieben durch:</p>
            <div class="formula-highlight">
                <span class="math">N(t) = Nâ‚€ Â· e<sup>âˆ’Î»t</sup></span>
            </div>
            <p>Dabei ist <span class="math">Nâ‚€</span> die Anfangsanzahl der Kerne und <span class="math">Î»</span> die Zerfallskonstante (stoffspezifisch).</p>
        </div>

        <div class="graph-section">
            <canvas id="mainCanvas" width="900" height="400"></canvas>
            
            <div class="legend">
                <div class="legend-item" style="color: #4CAF50;">
                    <div class="legend-line solid"></div>
                    <span>N(t) â€“ Anzahl der Kerne</span>
                </div>
                <div class="legend-item" style="color: #f44336;">
                    <div class="legend-line dashed"></div>
                    <span>N'(t) â€“ Zerfallsrate (negativ)</span>
                </div>
                <div class="legend-item" style="color: #ff9800;">
                    <div class="legend-line solid"></div>
                    <span>Tangente</span>
                </div>
            </div>

            <div class="controls">
                <div class="slider-group isotope">
                    <h4>Isotop wÃ¤hlen</h4>
                    <select id="isotopeSelect">
                        <option value="0.0866">Iod-131 (TÂ½ = 8 Tage)</option>
                        <option value="0.0231">CÃ¤sium-137 (TÂ½ = 30 Jahre)</option>
                        <option value="0.000428">Kohlenstoff-14 (TÂ½ = 5730 Jahre)</option>
                        <option value="0.693">Radon-222 (TÂ½ = 3,8 Tage)</option>
                        <option value="custom">Eigene Halbwertszeit...</option>
                    </select>
                    <div class="isotope-info" id="isotopeInfo">Î» = 0.0866 pro Tag</div>
                </div>
                
                <div class="slider-group time">
                    <h4>Zeitpunkt t</h4>
                    <div class="slider-container">
                        <label>t =</label>
                        <input type="range" id="sliderT" min="0" max="50" step="0.5" value="0">
                        <span class="value-display" id="tValue">0</span>
                    </div>
                </div>
                
                <div class="slider-group initial">
                    <h4>Anfangsmenge Nâ‚€</h4>
                    <div class="slider-container">
                        <label>Nâ‚€ =</label>
                        <input type="range" id="sliderN0" min="100" max="1000" step="50" value="1000">
                        <span class="value-display" id="n0Value">1000</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <div class="info-card amount">
                <div class="info-label">Verbleibende Kerne N(t)</div>
                <div class="info-value" id="nValue" style="color: #4CAF50;">1000</div>
                <div class="info-unit">Kerne</div>
            </div>
            <div class="info-card rate">
                <div class="info-label">Zerfallsrate N'(t)</div>
                <div class="info-value" id="dnValue" style="color: #f44336;">âˆ’86.6</div>
                <div class="info-unit">Kerne pro Zeiteinheit</div>
            </div>
            <div class="info-card halflife">
                <div class="info-label">Halbwertszeit TÂ½</div>
                <div class="info-value" id="halflifeValue" style="color: #9c27b0;">8.0</div>
                <div class="info-unit" id="halflifeUnit">Tage</div>
            </div>
            <div class="info-card activity">
                <div class="info-label">AktivitÃ¤t |N'(t)|</div>
                <div class="info-value" id="activityValue" style="color: #ff9800;">86.6</div>
                <div class="info-unit">ZerfÃ¤lle pro Zeiteinheit</div>
            </div>
        </div>

        <div class="derivative-explanation">
            <h3>ğŸ“ Die Bedeutung der Ableitung</h3>
            <div class="equation-box">
                <strong>Funktion:</strong> <span class="math">N(t) = Nâ‚€ Â· e<sup>âˆ’Î»t</sup></span> â†’ Anzahl der Kerne zum Zeitpunkt t
            </div>
            <div class="equation-box">
                <strong>Ableitung:</strong> <span class="math">N'(t) = âˆ’Î» Â· Nâ‚€ Â· e<sup>âˆ’Î»t</sup> = âˆ’Î» Â· N(t)</span> â†’ Ã„nderungsrate (Zerfallsrate)
            </div>
            <p><strong>Interpretation:</strong> Die Ableitung N'(t) gibt an, wie viele Kerne <em>pro Zeiteinheit</em> zerfallen. Das Minuszeichen zeigt: Die Anzahl <em>nimmt ab</em>.</p>
            <p><strong>Besonderheit:</strong> Die Zerfallsrate ist proportional zur aktuellen Anzahl! Je mehr Kerne vorhanden, desto mehr zerfallen pro Zeiteinheit.</p>
        </div>

        <div class="interpretation-box">
            <h3>ğŸ” Aktuelle Interpretation</h3>
            <p id="interpretationText">
                Zum Zeitpunkt <span class="highlight" id="intT">t = 0</span> sind noch <span class="highlight" id="intN">1000 Kerne</span> vorhanden.
                Die momentane Zerfallsrate betrÃ¤gt <span class="highlight" id="intDN">86.6 Kerne pro Zeiteinheit</span>.
                Das bedeutet: In diesem Moment zerfallen etwa <span class="highlight" id="intPercent">8.7%</span> der vorhandenen Kerne pro Zeiteinheit.
            </p>
        </div>

        <div class="task-box">
            <h3>ğŸ“ Erkundungsaufgaben</h3>
            <ol>
                <li><strong>Halbwertszeit ablesen:</strong> Bewegen Sie den Zeitregler, bis N(t) = Nâ‚€/2 ist. Vergleichen Sie mit dem angezeigten TÂ½-Wert.</li>
                <li><strong>Zerfallsrate untersuchen:</strong> Wie Ã¤ndert sich die Steigung der Tangente (= Zerfallsrate) mit der Zeit? Warum?</li>
                <li><strong>Isotope vergleichen:</strong> Wechseln Sie zwischen verschiedenen Isotopen. Welches zerfÃ¤llt am schnellsten?</li>
                <li><strong>ProportionalitÃ¤t prÃ¼fen:</strong> BestÃ¤tigen Sie, dass N'(t)/N(t) = âˆ’Î» konstant ist (unabhÃ¤ngig von t).</li>
            </ol>
        </div>

        <div class="exercise-section">
            <h2>âœï¸ Rechenaufgabe: Iod-131 in der SchilddrÃ¼sendiagnostik</h2>
            
            <div class="exercise-context">
                <p>Bei einer SchilddrÃ¼senuntersuchung wird einem Patienten eine LÃ¶sung mit <strong>Nâ‚€ = 10â¸ Iod-131-Kernen</strong> verabreicht. Die Halbwertszeit von Iod-131 betrÃ¤gt <strong>TÂ½ = 8 Tage</strong>.</p>
            </div>

            <div class="exercise-part">
                <div class="exercise-header" onclick="toggleSolution('task1')">
                    <span class="exercise-number">a)</span>
                    <span class="exercise-question">Bestimmen Sie die Zerfallskonstante Î».</span>
                    <span class="toggle-icon" id="icon-task1">â–¶</span>
                </div>
                <div class="hint-solution-container" id="task1" style="display: none;">
                    <div class="hint" onclick="toggleHint('hint1')">
                        <strong>ğŸ’¡ Tipp anzeigen</strong>
                        <div class="hint-content" id="hint1" style="display: none;">
                            <p>Es gilt der Zusammenhang: TÂ½ = ln(2) / Î»</p>
                            <p>Stellen Sie diese Gleichung nach Î» um.</p>
                        </div>
                    </div>
                    <div class="solution" onclick="toggleHint('sol1')">
                        <strong>âœ“ LÃ¶sung anzeigen</strong>
                        <div class="hint-content" id="sol1" style="display: none;">
                            <p>Aus TÂ½ = ln(2) / Î» folgt:</p>
                            <p class="formula-highlight">Î» = ln(2) / TÂ½ = ln(2) / 8 Tage â‰ˆ <strong>0,0866 pro Tag</strong></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="exercise-part">
                <div class="exercise-header" onclick="toggleSolution('task2')">
                    <span class="exercise-number">b)</span>
                    <span class="exercise-question">Stellen Sie die Funktion N(t) auf und berechnen Sie die Ableitung N'(t).</span>
                    <span class="toggle-icon" id="icon-task2">â–¶</span>
                </div>
                <div class="hint-solution-container" id="task2" style="display: none;">
                    <div class="hint" onclick="toggleHint('hint2')">
                        <strong>ğŸ’¡ Tipp anzeigen</strong>
                        <div class="hint-content" id="hint2" style="display: none;">
                            <p>Die allgemeine Form lautet: N(t) = Nâ‚€ Â· e<sup>âˆ’Î»t</sup></p>
                            <p>FÃ¼r die Ableitung benÃ¶tigen Sie die Kettenregel: (e<sup>u</sup>)' = u' Â· e<sup>u</sup></p>
                        </div>
                    </div>
                    <div class="solution" onclick="toggleHint('sol2')">
                        <strong>âœ“ LÃ¶sung anzeigen</strong>
                        <div class="hint-content" id="sol2" style="display: none;">
                            <p><strong>Funktion:</strong></p>
                            <p class="formula-highlight">N(t) = 10â¸ Â· e<sup>âˆ’0,0866Â·t</sup></p>
                            <p><strong>Ableitung mit Kettenregel:</strong></p>
                            <p>N'(t) = 10â¸ Â· (âˆ’0,0866) Â· e<sup>âˆ’0,0866Â·t</sup></p>
                            <p class="formula-highlight">N'(t) = âˆ’0,0866 Â· 10â¸ Â· e<sup>âˆ’0,0866Â·t</sup> = <strong>âˆ’0,0866 Â· N(t)</strong></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="exercise-part">
                <div class="exercise-header" onclick="toggleSolution('task3')">
                    <span class="exercise-number">c)</span>
                    <span class="exercise-question">Berechnen Sie die Zerfallsrate (AktivitÃ¤t) zu den Zeitpunkten t = 0, t = 8 Tage und t = 24 Tage.</span>
                    <span class="toggle-icon" id="icon-task3">â–¶</span>
                </div>
                <div class="hint-solution-container" id="task3" style="display: none;">
                    <div class="hint" onclick="toggleHint('hint3')">
                        <strong>ğŸ’¡ Tipp anzeigen</strong>
                        <div class="hint-content" id="hint3" style="display: none;">
                            <p>Die AktivitÃ¤t A(t) ist der Betrag der Zerfallsrate: A(t) = |N'(t)|</p>
                            <p>Setzen Sie die Zeitwerte in N'(t) ein.</p>
                            <p>Beachten Sie: Nach einer Halbwertszeit ist N(TÂ½) = Nâ‚€/2</p>
                        </div>
                    </div>
                    <div class="solution" onclick="toggleHint('sol3')">
                        <strong>âœ“ LÃ¶sung anzeigen</strong>
                        <div class="hint-content" id="sol3" style="display: none;">
                            <table class="result-table">
                                <tr>
                                    <th>Zeitpunkt</th>
                                    <th>N(t)</th>
                                    <th>A(t) = |N'(t)| = Î»Â·N(t)</th>
                                </tr>
                                <tr>
                                    <td>t = 0</td>
                                    <td>10â¸</td>
                                    <td>0,0866 Â· 10â¸ = <strong>8,66 Â· 10â¶ ZerfÃ¤lle/Tag</strong></td>
                                </tr>
                                <tr>
                                    <td>t = 8 d (1Ã— TÂ½)</td>
                                    <td>5 Â· 10â·</td>
                                    <td>0,0866 Â· 5Â·10â· = <strong>4,33 Â· 10â¶ ZerfÃ¤lle/Tag</strong></td>
                                </tr>
                                <tr>
                                    <td>t = 24 d (3Ã— TÂ½)</td>
                                    <td>1,25 Â· 10â·</td>
                                    <td>0,0866 Â· 1,25Â·10â· = <strong>1,08 Â· 10â¶ ZerfÃ¤lle/Tag</strong></td>
                                </tr>
                            </table>
                            <p style="margin-top: 15px;"><strong>Erkenntnis:</strong> Nach jeder Halbwertszeit halbiert sich auch die AktivitÃ¤t!</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="exercise-part">
                <div class="exercise-header" onclick="toggleSolution('task4')">
                    <span class="exercise-number">d)</span>
                    <span class="exercise-question">Interpretieren Sie das Ergebnis: Was bedeutet die Zerfallsrate physikalisch? Warum nimmt sie ab?</span>
                    <span class="toggle-icon" id="icon-task4">â–¶</span>
                </div>
                <div class="hint-solution-container" id="task4" style="display: none;">
                    <div class="hint" onclick="toggleHint('hint4')">
                        <strong>ğŸ’¡ Tipp anzeigen</strong>
                        <div class="hint-content" id="hint4" style="display: none;">
                            <p>Denken Sie an die Formel N'(t) = âˆ’Î» Â· N(t).</p>
                            <p>Die Zerfallsrate hÃ¤ngt von der aktuellen Anzahl der Kerne ab.</p>
                        </div>
                    </div>
                    <div class="solution" onclick="toggleHint('sol4')">
                        <strong>âœ“ LÃ¶sung anzeigen</strong>
                        <div class="hint-content" id="sol4" style="display: none;">
                            <p><strong>Physikalische Bedeutung:</strong></p>
                            <ul>
                                <li>Die Zerfallsrate gibt an, wie viele Kerne <em>pro Zeiteinheit</em> zerfallen.</li>
                                <li>Sie entspricht der Steigung der Tangente an N(t) â€“ mit negativem Vorzeichen.</li>
                            </ul>
                            <p><strong>Warum nimmt die Zerfallsrate ab?</strong></p>
                            <ul>
                                <li>Es gilt: N'(t) = âˆ’Î» Â· N(t), also ist die Zerfallsrate <em>proportional</em> zur Anzahl der vorhandenen Kerne.</li>
                                <li>Je weniger Kerne vorhanden sind, desto weniger kÃ¶nnen pro Zeiteinheit zerfallen.</li>
                                <li>Der <em>prozentuale</em> Anteil (Î» â‰ˆ 8,66%) bleibt konstant, aber die <em>absolute</em> Zahl sinkt.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="exercise-part">
                <div class="exercise-header" onclick="toggleSolution('task5')">
                    <span class="exercise-number">e)</span>
                    <span class="exercise-question">Nach wie vielen Tagen ist die AktivitÃ¤t auf 1% des Anfangswertes gesunken?</span>
                    <span class="toggle-icon" id="icon-task5">â–¶</span>
                </div>
                <div class="hint-solution-container" id="task5" style="display: none;">
                    <div class="hint" onclick="toggleHint('hint5')">
                        <strong>ğŸ’¡ Tipp anzeigen</strong>
                        <div class="hint-content" id="hint5" style="display: none;">
                            <p>Da A(t) = Î»Â·N(t) und Î» konstant ist, gilt: A(t)/Aâ‚€ = N(t)/Nâ‚€</p>
                            <p>Setzen Sie N(t)/Nâ‚€ = 0,01 und lÃ¶sen Sie nach t auf.</p>
                            <p>Sie benÃ¶tigen den natÃ¼rlichen Logarithmus.</p>
                        </div>
                    </div>
                    <div class="solution" onclick="toggleHint('sol5')">
                        <strong>âœ“ LÃ¶sung anzeigen</strong>
                        <div class="hint-content" id="sol5" style="display: none;">
                            <p><strong>Ansatz:</strong> N(t) = 0,01 Â· Nâ‚€</p>
                            <p>Nâ‚€ Â· e<sup>âˆ’Î»t</sup> = 0,01 Â· Nâ‚€</p>
                            <p>e<sup>âˆ’Î»t</sup> = 0,01</p>
                            <p>âˆ’Î»t = ln(0,01) = âˆ’4,605</p>
                            <p class="formula-highlight">t = 4,605 / 0,0866 â‰ˆ <strong>53,2 Tage</strong></p>
                            <p style="margin-top: 10px;"><em>Das entspricht etwa 6,6 Halbwertszeiten (53,2 / 8 â‰ˆ 6,6).</em></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="extension-ideas">
            <h3>ğŸš€ WeiterfÃ¼hrende Anwendungen</h3>
            <p>Die gleiche Mathematik beschreibt viele natÃ¼rliche Prozesse. <em>Klicken Sie auf eine Karte fÃ¼r eine Beispielaufgabe!</em></p>
            <div class="idea-grid">
                <div class="idea-card" onclick="openModal('kondensator')">
                    <div class="idea-icon">âš¡</div>
                    <div class="idea-title">Kondensatorentladung</div>
                    <div class="idea-desc">U(t) = Uâ‚€Â·e<sup>âˆ’t/Ï„</sup></div>
                    <div class="idea-hint">â–¶ Aufgabe anzeigen</div>
                </div>
                <div class="idea-card" onclick="openModal('abkuehlung')">
                    <div class="idea-icon">ğŸŒ¡ï¸</div>
                    <div class="idea-title">AbkÃ¼hlung</div>
                    <div class="idea-desc">Î”T(t) = Î”Tâ‚€Â·e<sup>âˆ’kt</sup></div>
                    <div class="idea-hint">â–¶ Aufgabe anzeigen</div>
                </div>
                <div class="idea-card" onclick="openModal('bakterien')">
                    <div class="idea-icon">ğŸ¦ </div>
                    <div class="idea-title">Bakterienwachstum</div>
                    <div class="idea-desc">N(t) = Nâ‚€Â·e<sup>+kt</sup></div>
                    <div class="idea-hint">â–¶ Aufgabe anzeigen</div>
                </div>
                <div class="idea-card" onclick="openModal('medikament')">
                    <div class="idea-icon">ğŸ’Š</div>
                    <div class="idea-title">Medikamentenabbau</div>
                    <div class="idea-desc">c(t) = câ‚€Â·e<sup>âˆ’Î»t</sup></div>
                    <div class="idea-hint">â–¶ Aufgabe anzeigen</div>
                </div>
                <div class="idea-card" onclick="openModal('luftdruck')">
                    <div class="idea-icon">ğŸ”ï¸</div>
                    <div class="idea-title">Luftdruck</div>
                    <div class="idea-desc">p(h) = pâ‚€Â·e<sup>âˆ’h/hâ‚€</sup></div>
                    <div class="idea-hint">â–¶ Aufgabe anzeigen</div>
                </div>
                <div class="idea-card" onclick="openModal('c14')">
                    <div class="idea-icon">ğŸ“…</div>
                    <div class="idea-title">C-14-Datierung</div>
                    <div class="idea-desc">Altersbestimmung</div>
                    <div class="idea-hint">â–¶ Aufgabe anzeigen</div>
                </div>
            </div>
        </div>

        <!-- Modals fÃ¼r Beispielaufgaben -->
        <div class="modal-overlay" id="modal-kondensator">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('kondensator')">&times;</span>
                <div class="modal-header">
                    <span class="modal-icon">âš¡</span>
                    <span class="modal-title">Kondensatorentladung</span>
                </div>
                <p>Bei der Entladung eines Kondensators Ã¼ber einen Widerstand nimmt die Spannung exponentiell ab:</p>
                <div class="modal-formula">U(t) = Uâ‚€ Â· e<sup>âˆ’t/Ï„</sup> mit Ï„ = RÂ·C</div>
                <p>Die Zeitkonstante Ï„ gibt an, nach welcher Zeit die Spannung auf ca. 37% (= 1/e) gefallen ist.</p>
                
                <div class="modal-task">
                    <h4>ğŸ“ Aufgabe</h4>
                    <p>Ein Kondensator (C = 470 ÂµF) wird Ã¼ber einen Widerstand (R = 10 kÎ©) entladen. Die Anfangsspannung betrÃ¤gt Uâ‚€ = 12 V.</p>
                    <ol>
                        <li>Berechnen Sie die Zeitkonstante Ï„.</li>
                        <li>Bestimmen Sie U'(t) und interpretieren Sie diese physikalisch.</li>
                        <li>Nach welcher Zeit ist die Spannung auf 3 V gesunken?</li>
                    </ol>
                </div>
                
                <button class="modal-btn" onclick="toggleModalSolution('kondensator')">LÃ¶sung anzeigen</button>
                
                <div class="modal-solution" id="solution-kondensator">
                    <h4>âœ“ LÃ¶sung</h4>
                    <div class="solution-step">
                        <strong>a) Zeitkonstante:</strong><br>
                        Ï„ = R Â· C = 10.000 Î© Â· 0,00047 F = <span class="solution-result">4,7 s</span>
                    </div>
                    <div class="solution-step">
                        <strong>b) Ableitung:</strong><br>
                        U(t) = 12 Â· e<sup>âˆ’t/4,7</sup><br>
                        U'(t) = 12 Â· (âˆ’1/4,7) Â· e<sup>âˆ’t/4,7</sup> = <span class="solution-result">âˆ’2,55 Â· e<sup>âˆ’t/4,7</sup> V/s</span><br><br>
                        <em>Interpretation:</em> U'(t) ist die momentane Ã„nderungsrate der Spannung. Das Minuszeichen zeigt, dass die Spannung abnimmt. Der Betrag |U'(t)| = I(t)Â·R entspricht dem Spannungsabfall am Widerstand.
                    </div>
                    <div class="solution-step">
                        <strong>c) Zeit fÃ¼r U = 3 V:</strong><br>
                        3 = 12 Â· e<sup>âˆ’t/4,7</sup><br>
                        0,25 = e<sup>âˆ’t/4,7</sup><br>
                        ln(0,25) = âˆ’t/4,7<br>
                        t = âˆ’4,7 Â· ln(0,25) = 4,7 Â· 1,386 = <span class="solution-result">6,5 s</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="modal-abkuehlung">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('abkuehlung')">&times;</span>
                <div class="modal-header">
                    <span class="modal-icon">ğŸŒ¡ï¸</span>
                    <span class="modal-title">Newtonsches AbkÃ¼hlungsgesetz</span>
                </div>
                <p>Die Temperaturdifferenz zur Umgebung nimmt exponentiell ab:</p>
                <div class="modal-formula">T(t) = T<sub>U</sub> + (Tâ‚€ âˆ’ T<sub>U</sub>) Â· e<sup>âˆ’kt</sup></div>
                <p>Dabei ist T<sub>U</sub> die Umgebungstemperatur und k die AbkÃ¼hlungskonstante.</p>
                
                <div class="modal-task">
                    <h4>ğŸ“ Aufgabe</h4>
                    <p>Eine Tasse Kaffee hat anfangs 90Â°C. Die Raumtemperatur betrÃ¤gt 20Â°C. Nach 5 Minuten ist der Kaffee auf 70Â°C abgekÃ¼hlt.</p>
                    <ol>
                        <li>Bestimmen Sie die AbkÃ¼hlungskonstante k.</li>
                        <li>Berechnen Sie die AbkÃ¼hlungsrate T'(t) und deren Wert bei t = 0.</li>
                        <li>Wann erreicht der Kaffee Trinktemperatur (60Â°C)?</li>
                    </ol>
                </div>
                
                <button class="modal-btn" onclick="toggleModalSolution('abkuehlung')">LÃ¶sung anzeigen</button>
                
                <div class="modal-solution" id="solution-abkuehlung">
                    <h4>âœ“ LÃ¶sung</h4>
                    <div class="solution-step">
                        <strong>a) AbkÃ¼hlungskonstante k:</strong><br>
                        T(5) = 20 + 70 Â· e<sup>âˆ’5k</sup> = 70<br>
                        70 Â· e<sup>âˆ’5k</sup> = 50<br>
                        e<sup>âˆ’5k</sup> = 50/70 = 5/7<br>
                        âˆ’5k = ln(5/7) = âˆ’0,336<br>
                        <span class="solution-result">k â‰ˆ 0,0673 minâ»Â¹</span>
                    </div>
                    <div class="solution-step">
                        <strong>b) AbkÃ¼hlungsrate:</strong><br>
                        T(t) = 20 + 70 Â· e<sup>âˆ’0,0673t</sup><br>
                        T'(t) = 70 Â· (âˆ’0,0673) Â· e<sup>âˆ’0,0673t</sup> = <span class="solution-result">âˆ’4,71 Â· e<sup>âˆ’0,0673t</sup> Â°C/min</span><br><br>
                        Bei t = 0: T'(0) = âˆ’4,71 Â°C/min<br>
                        <em>Der Kaffee kÃ¼hlt anfangs um ca. 4,7Â°C pro Minute ab.</em>
                    </div>
                    <div class="solution-step">
                        <strong>c) Zeit fÃ¼r 60Â°C:</strong><br>
                        60 = 20 + 70 Â· e<sup>âˆ’0,0673t</sup><br>
                        40 = 70 Â· e<sup>âˆ’0,0673t</sup><br>
                        e<sup>âˆ’0,0673t</sup> = 4/7<br>
                        t = âˆ’ln(4/7) / 0,0673 = <span class="solution-result">8,3 Minuten</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="modal-bakterien">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('bakterien')">&times;</span>
                <div class="modal-header">
                    <span class="modal-icon">ğŸ¦ </span>
                    <span class="modal-title">Bakterienwachstum</span>
                </div>
                <p>Unter idealen Bedingungen wachsen Bakterienpopulationen exponentiell:</p>
                <div class="modal-formula">N(t) = Nâ‚€ Â· e<sup>kt</sup></div>
                <p>Die Wachstumskonstante k hÃ¤ngt von der Verdopplungszeit T<sub>2</sub> ab: k = ln(2)/T<sub>2</sub></p>
                
                <div class="modal-task">
                    <h4>ğŸ“ Aufgabe</h4>
                    <p>Eine Bakterienkultur startet mit 1000 Bakterien. Die Verdopplungszeit betrÃ¤gt 20 Minuten.</p>
                    <ol>
                        <li>Bestimmen Sie die Wachstumskonstante k.</li>
                        <li>Berechnen Sie N'(t). Was bedeutet N'(60)?</li>
                        <li>Nach welcher Zeit sind 1 Million Bakterien erreicht?</li>
                    </ol>
                </div>
                
                <button class="modal-btn" onclick="toggleModalSolution('bakterien')">LÃ¶sung anzeigen</button>
                
                <div class="modal-solution" id="solution-bakterien">
                    <h4>âœ“ LÃ¶sung</h4>
                    <div class="solution-step">
                        <strong>a) Wachstumskonstante:</strong><br>
                        k = ln(2) / T<sub>2</sub> = ln(2) / 20 = <span class="solution-result">0,0347 minâ»Â¹</span>
                    </div>
                    <div class="solution-step">
                        <strong>b) Ableitung:</strong><br>
                        N(t) = 1000 Â· e<sup>0,0347t</sup><br>
                        N'(t) = 1000 Â· 0,0347 Â· e<sup>0,0347t</sup> = <span class="solution-result">34,7 Â· e<sup>0,0347t</sup> Bakterien/min</span><br><br>
                        N'(60) = 34,7 Â· e<sup>0,0347Â·60</sup> = 34,7 Â· 8 = 277,6 Bakterien/min<br>
                        <em>Nach 1 Stunde wÃ¤chst die Population um ca. 278 Bakterien pro Minute.</em>
                    </div>
                    <div class="solution-step">
                        <strong>c) Zeit fÃ¼r 1 Million:</strong><br>
                        1.000.000 = 1000 Â· e<sup>0,0347t</sup><br>
                        1000 = e<sup>0,0347t</sup><br>
                        ln(1000) = 0,0347t<br>
                        t = 6,908 / 0,0347 = <span class="solution-result">199 Minuten â‰ˆ 3,3 Stunden</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="modal-medikament">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('medikament')">&times;</span>
                <div class="modal-header">
                    <span class="modal-icon">ğŸ’Š</span>
                    <span class="modal-title">Medikamentenabbau (Pharmakokinetik)</span>
                </div>
                <p>Die Wirkstoffkonzentration im Blut nimmt nach Einnahme exponentiell ab:</p>
                <div class="modal-formula">c(t) = câ‚€ Â· e<sup>âˆ’Î»t</sup></div>
                <p>Die Halbwertszeit T<sub>Â½</sub> ist ein wichtiger Parameter fÃ¼r die Dosierung.</p>
                
                <div class="modal-task">
                    <h4>ğŸ“ Aufgabe</h4>
                    <p>Ein Schmerzmittel hat eine Halbwertszeit von 4 Stunden. Die Anfangskonzentration nach Einnahme betrÃ¤gt câ‚€ = 400 mg/L.</p>
                    <ol>
                        <li>Bestimmen Sie die Abbaukonstante Î».</li>
                        <li>Wie schnell sinkt die Konzentration anfÃ¤nglich (c'(0))?</li>
                        <li>Wann ist die Konzentration unter die Wirksamkeitsgrenze von 50 mg/L gesunken?</li>
                    </ol>
                </div>
                
                <button class="modal-btn" onclick="toggleModalSolution('medikament')">LÃ¶sung anzeigen</button>
                
                <div class="modal-solution" id="solution-medikament">
                    <h4>âœ“ LÃ¶sung</h4>
                    <div class="solution-step">
                        <strong>a) Abbaukonstante:</strong><br>
                        Î» = ln(2) / T<sub>Â½</sub> = ln(2) / 4 = <span class="solution-result">0,173 hâ»Â¹</span>
                    </div>
                    <div class="solution-step">
                        <strong>b) AnfÃ¤ngliche Abbaurate:</strong><br>
                        c(t) = 400 Â· e<sup>âˆ’0,173t</sup><br>
                        c'(t) = âˆ’0,173 Â· 400 Â· e<sup>âˆ’0,173t</sup> = âˆ’69,2 Â· e<sup>âˆ’0,173t</sup><br>
                        c'(0) = <span class="solution-result">âˆ’69,2 mg/(LÂ·h)</span><br>
                        <em>Die Konzentration sinkt anfangs um ca. 69 mg/L pro Stunde.</em>
                    </div>
                    <div class="solution-step">
                        <strong>c) Zeit bis unter Wirksamkeitsgrenze:</strong><br>
                        50 = 400 Â· e<sup>âˆ’0,173t</sup><br>
                        0,125 = e<sup>âˆ’0,173t</sup><br>
                        ln(0,125) = âˆ’0,173t<br>
                        t = âˆ’ln(0,125) / 0,173 = 2,079 / 0,173 = <span class="solution-result">12 Stunden</span><br>
                        <em>(Das entspricht 3 Halbwertszeiten: 400 â†’ 200 â†’ 100 â†’ 50)</em>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="modal-luftdruck">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('luftdruck')">&times;</span>
                <div class="modal-header">
                    <span class="modal-icon">ğŸ”ï¸</span>
                    <span class="modal-title">Barometrische HÃ¶henformel</span>
                </div>
                <p>Der Luftdruck nimmt mit der HÃ¶he exponentiell ab:</p>
                <div class="modal-formula">p(h) = pâ‚€ Â· e<sup>âˆ’h/hâ‚€</sup></div>
                <p>Dabei ist hâ‚€ â‰ˆ 8500 m die SkalenhÃ¶he der AtmosphÃ¤re.</p>
                
                <div class="modal-task">
                    <h4>ğŸ“ Aufgabe</h4>
                    <p>Der Luftdruck auf MeereshÃ¶he betrÃ¤gt pâ‚€ = 1013 hPa. Die SkalenhÃ¶he ist hâ‚€ = 8500 m.</p>
                    <ol>
                        <li>Berechnen Sie den Luftdruck auf der Zugspitze (2962 m).</li>
                        <li>Bestimmen Sie p'(h). Was bedeutet p'(0)?</li>
                        <li>In welcher HÃ¶he ist der Luftdruck auf die HÃ¤lfte gesunken?</li>
                    </ol>
                </div>
                
                <button class="modal-btn" onclick="toggleModalSolution('luftdruck')">LÃ¶sung anzeigen</button>
                
                <div class="modal-solution" id="solution-luftdruck">
                    <h4>âœ“ LÃ¶sung</h4>
                    <div class="solution-step">
                        <strong>a) Druck auf der Zugspitze:</strong><br>
                        p(2962) = 1013 Â· e<sup>âˆ’2962/8500</sup><br>
                        p(2962) = 1013 Â· e<sup>âˆ’0,348</sup> = 1013 Â· 0,706 = <span class="solution-result">715 hPa</span>
                    </div>
                    <div class="solution-step">
                        <strong>b) Ableitung:</strong><br>
                        p(h) = 1013 Â· e<sup>âˆ’h/8500</sup><br>
                        p'(h) = 1013 Â· (âˆ’1/8500) Â· e<sup>âˆ’h/8500</sup> = <span class="solution-result">âˆ’0,119 Â· e<sup>âˆ’h/8500</sup> hPa/m</span><br><br>
                        p'(0) = âˆ’0,119 hPa/m<br>
                        <em>Auf MeereshÃ¶he sinkt der Druck um ca. 0,12 hPa pro Meter HÃ¶he (â‰ˆ 12 hPa pro 100 m).</em>
                    </div>
                    <div class="solution-step">
                        <strong>c) HÃ¶he fÃ¼r halben Druck:</strong><br>
                        506,5 = 1013 Â· e<sup>âˆ’h/8500</sup><br>
                        0,5 = e<sup>âˆ’h/8500</sup><br>
                        ln(0,5) = âˆ’h/8500<br>
                        h = âˆ’8500 Â· ln(0,5) = 8500 Â· 0,693 = <span class="solution-result">5890 m</span><br>
                        <em>(etwa die HÃ¶he des Kilimandscharo)</em>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="modal-c14">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('c14')">&times;</span>
                <div class="modal-header">
                    <span class="modal-icon">ğŸ“…</span>
                    <span class="modal-title">C-14-Datierung (Radiokarbonmethode)</span>
                </div>
                <p>Lebende Organismen haben einen konstanten C-14-Anteil. Nach dem Tod zerfÃ¤llt C-14 mit einer Halbwertszeit von 5730 Jahren:</p>
                <div class="modal-formula">N(t) = Nâ‚€ Â· e<sup>âˆ’Î»t</sup> mit Î» = ln(2)/5730 â‰ˆ 0,000121 pro Jahr</div>
                
                <div class="modal-task">
                    <h4>ğŸ“ Aufgabe</h4>
                    <p>Bei einer archÃ¤ologischen Ausgrabung wird ein HolzstÃ¼ck gefunden. Die C-14-AktivitÃ¤t betrÃ¤gt nur noch 35% des Wertes von frischem Holz.</p>
                    <ol>
                        <li>Wie alt ist das HolzstÃ¼ck?</li>
                        <li>Berechnen Sie, wie viel Prozent des ursprÃ¼nglichen C-14 nach 10.000 Jahren noch vorhanden sind.</li>
                        <li>Warum ist die C-14-Methode fÃ¼r Proben Ã¤lter als ~50.000 Jahre ungeeignet?</li>
                    </ol>
                </div>
                
                <button class="modal-btn" onclick="toggleModalSolution('c14')">LÃ¶sung anzeigen</button>
                
                <div class="modal-solution" id="solution-c14">
                    <h4>âœ“ LÃ¶sung</h4>
                    <div class="solution-step">
                        <strong>a) Alter des HolzstÃ¼cks:</strong><br>
                        N(t)/Nâ‚€ = 0,35 = e<sup>âˆ’0,000121t</sup><br>
                        ln(0,35) = âˆ’0,000121t<br>
                        t = âˆ’ln(0,35) / 0,000121 = 1,050 / 0,000121 = <span class="solution-result">8678 Jahre</span>
                    </div>
                    <div class="solution-step">
                        <strong>b) C-14-Anteil nach 10.000 Jahren:</strong><br>
                        N(10000)/Nâ‚€ = e<sup>âˆ’0,000121 Â· 10000</sup> = e<sup>âˆ’1,21</sup> = <span class="solution-result">29,8% â‰ˆ 30%</span>
                    </div>
                    <div class="solution-step">
                        <strong>c) Grenze der Methode:</strong><br>
                        Nach 50.000 Jahren: N/Nâ‚€ = e<sup>âˆ’0,000121 Â· 50000</sup> = e<sup>âˆ’6,05</sup> â‰ˆ 0,24%<br><br>
                        <em>Bei so geringen Restmengen (< 1%) wird die Messung ungenau, da:</em>
                        <ul>
                            <li>Die AktivitÃ¤t extrem gering ist</li>
                            <li>Verunreinigungen einen groÃŸen relativen Fehler verursachen</li>
                            <li>Der statistische Messfehler dominiert</li>
                        </ul>
                        <span class="solution-result">Praktische Grenze: ca. 50.000 Jahre (â‰ˆ 9 Halbwertszeiten)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Modal-Funktionen
        function openModal(id) {
            document.getElementById('modal-' + id).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(id) {
            document.getElementById('modal-' + id).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function toggleModalSolution(id) {
            const solution = document.getElementById('solution-' + id);
            solution.classList.toggle('visible');
        }

        // Modal schlieÃŸen bei Klick auf Overlay
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        });

        // Modal schlieÃŸen mit Escape-Taste
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                document.body.style.overflow = 'auto';
            }
        });

        function toggleSolution(id) {
            const element = document.getElementById(id);
            const icon = document.getElementById('icon-' + id);
            if (element.style.display === 'none') {
                element.style.display = 'block';
                icon.textContent = 'â–¼';
            } else {
                element.style.display = 'none';
                icon.textContent = 'â–¶';
            }
        }

        function toggleHint(id) {
            const element = document.getElementById(id);
            if (element.style.display === 'none') {
                element.style.display = 'block';
            } else {
                element.style.display = 'none';
            }
            event.stopPropagation();
        }

        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;

        // Koordinatensystem-Einstellungen
        let tMax = 50;
        const tMin = 0, nMin = 0, nMax = 1100;

        // Aktuelle Parameter
        let lambda = 0.0866;  // Iod-131
        let N0 = 1000;
        let currentT = 0;
        let maxDrawnT = 0;

        // Zeiteinheit fÃ¼r Anzeige
        let timeUnit = "Tage";

        // Skalierungsfunktionen
        function toPixelX(t) {
            return 50 + (t - tMin) / (tMax - tMin) * (width - 70);
        }
        
        function toPixelY(n) {
            return height - 40 - (n - nMin) / (nMax - nMin) * (height - 60);
        }

        // Koordinatensystem zeichnen
        function drawAxes() {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;

            // t-Achse
            ctx.beginPath();
            ctx.moveTo(50, height - 40);
            ctx.lineTo(width - 20, height - 40);
            ctx.stroke();

            // N-Achse
            ctx.beginPath();
            ctx.moveTo(50, height - 40);
            ctx.lineTo(50, 20);
            ctx.stroke();

            // Gitterlinien und Beschriftungen
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';

            // t-Achse Beschriftungen
            const tStep = tMax <= 50 ? 10 : (tMax <= 200 ? 50 : 1000);
            for (let t = 0; t <= tMax; t += tStep) {
                const px = toPixelX(t);
                ctx.beginPath();
                ctx.moveTo(px, 20);
                ctx.lineTo(px, height - 40);
                ctx.stroke();
                ctx.fillText(t.toString(), px - 10, height - 22);
            }

            // N-Achse Beschriftungen
            for (let n = 0; n <= nMax; n += 200) {
                const py = toPixelY(n);
                ctx.beginPath();
                ctx.moveTo(50, py);
                ctx.lineTo(width - 20, py);
                ctx.stroke();
                ctx.fillText(n.toString(), 15, py + 4);
            }

            // Achsenbeschriftungen
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('t (' + timeUnit + ')', width - 60, height - 22);
            ctx.fillText('N', 15, 15);
        }

        // Funktion zeichnen
        function drawFunction(func, color, dashed = false, maxT = tMax) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.setLineDash(dashed ? [10, 5] : []);

            ctx.beginPath();
            let started = false;

            const endPx = toPixelX(Math.min(maxT, tMax));

            for (let px = toPixelX(0); px <= endPx; px++) {
                const t = tMin + (px - 50) / (width - 70) * (tMax - tMin);
                if (t < 0) continue;
                const n = func(t);
                const py = toPixelY(n);

                if (py >= 10 && py <= height - 30) {
                    if (!started) {
                        ctx.moveTo(px, py);
                        started = true;
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
            }
            ctx.stroke();
            ctx.setLineDash([]);
        }

        // Tangente zeichnen
        function drawTangent(t0, n0, slope, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;

            const tangent = (t) => n0 + slope * (t - t0);
            
            ctx.beginPath();
            let started = false;

            for (let px = toPixelX(0); px <= toPixelX(tMax); px++) {
                const t = tMin + (px - 50) / (width - 70) * (tMax - tMin);
                const n = tangent(t);
                const py = toPixelY(n);

                if (py >= 10 && py <= height - 30) {
                    if (!started) {
                        ctx.moveTo(px, py);
                        started = true;
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
            }
            ctx.stroke();
        }

        // Steigungsdreieck zeichnen
        function drawSlopeTriangle(t0, n0, slope) {
            // Zeitschritt fÃ¼r Dreieck (abhÃ¤ngig von tMax)
            const deltaT = tMax / 10;
            const deltaN = slope * deltaT;
            
            const px0 = toPixelX(t0);
            const py0 = toPixelY(n0);
            const px1 = toPixelX(t0 + deltaT);
            const py1 = toPixelY(n0);
            const px2 = toPixelX(t0 + deltaT);
            const py2 = toPixelY(n0 + deltaN);

            if (py2 < 10 || py0 > height - 30 || px1 > width - 20) return;

            // Dreieck fÃ¼llen
            ctx.fillStyle = 'rgba(255, 152, 0, 0.2)';
            ctx.beginPath();
            ctx.moveTo(px0, py0);
            ctx.lineTo(px1, py1);
            ctx.lineTo(px2, py2);
            ctx.closePath();
            ctx.fill();

            // Kanten
            ctx.strokeStyle = '#FF9800';
            ctx.lineWidth = 2;

            ctx.beginPath();
            ctx.moveTo(px0, py0);
            ctx.lineTo(px1, py1);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(px1, py1);
            ctx.lineTo(px2, py2);
            ctx.stroke();

            // Beschriftungen
            ctx.fillStyle = '#E65100';
            ctx.font = 'bold 12px Arial';
            ctx.fillText('Î”t', (px0 + px1) / 2 - 8, py0 + 15);
            ctx.fillText("N'Â·Î”t", px1 + 5, (py1 + py2) / 2);
        }

        // Punkt zeichnen
        function drawPoint(t, n, color) {
            const px = toPixelX(t);
            const py = toPixelY(n);

            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(px, py, 8, 0, 2 * Math.PI);
            ctx.fill();

            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(px, py, 4, 0, 2 * Math.PI);
            ctx.fill();
        }

        // Hauptzeichenfunktion
        function draw() {
            ctx.clearRect(0, 0, width, height);
            drawAxes();

            // Funktionen
            const N = (t) => N0 * Math.exp(-lambda * t);
            const dN = (t) => -lambda * N0 * Math.exp(-lambda * t);
            
            // Skalierte Ableitung fÃ¼r bessere Sichtbarkeit (mit Faktor)
            const scaleFactor = -10 / lambda;  // Skalierung anpassen
            const dNscaled = (t) => -dN(t) * scaleFactor / 10;

            // Update maxDrawnT
            if (currentT > maxDrawnT) {
                maxDrawnT = currentT;
            }

            // Ableitung (gestrichelt, bis zum Slider, skaliert fÃ¼r Sichtbarkeit)
            if (maxDrawnT > 0) {
                // Zeige |N'(t)| skaliert
                const dNvisual = (t) => Math.abs(dN(t));
                drawFunction(dNvisual, '#f44336', true, maxDrawnT);
            }

            // Hauptfunktion N(t)
            drawFunction(N, '#4CAF50');

            // Tangente und Punkt
            const nCurrent = N(currentT);
            const dnCurrent = dN(currentT);
            drawTangent(currentT, nCurrent, dnCurrent, '#FF9800');
            drawSlopeTriangle(currentT, nCurrent, dnCurrent);
            drawPoint(currentT, nCurrent, '#4CAF50');

            // Werte aktualisieren
            updateDisplay(nCurrent, dnCurrent);
        }

        // Anzeige aktualisieren
        function updateDisplay(n, dn) {
            document.getElementById('tValue').textContent = currentT.toFixed(1);
            document.getElementById('nValue').textContent = n.toFixed(0);
            document.getElementById('dnValue').textContent = dn.toFixed(1);
            document.getElementById('activityValue').textContent = Math.abs(dn).toFixed(1);

            const halflife = Math.log(2) / lambda;
            document.getElementById('halflifeValue').textContent = halflife.toFixed(1);

            // Interpretation
            document.getElementById('intT').textContent = 't = ' + currentT.toFixed(1) + ' ' + timeUnit;
            document.getElementById('intN').textContent = n.toFixed(0) + ' Kerne';
            document.getElementById('intDN').textContent = Math.abs(dn).toFixed(1) + ' Kerne pro ' + timeUnit.slice(0, -1);
            
            const percent = (Math.abs(dn) / n * 100).toFixed(1);
            document.getElementById('intPercent').textContent = percent + '%';
        }

        // Isotop-Auswahl
        document.getElementById('isotopeSelect').addEventListener('change', (e) => {
            const value = e.target.value;
            
            if (value === 'custom') {
                const input = prompt('Halbwertszeit eingeben (in Tagen):', '10');
                if (input) {
                    const T = parseFloat(input);
                    lambda = Math.log(2) / T;
                    timeUnit = 'Tage';
                    tMax = T * 6;
                }
            } else {
                lambda = parseFloat(value);
                
                // Zeiteinheit und Skalierung anpassen
                if (lambda === 0.0866) {
                    timeUnit = 'Tage';
                    tMax = 50;
                } else if (lambda === 0.0231) {
                    timeUnit = 'Jahre';
                    tMax = 200;
                } else if (lambda === 0.000428) {
                    timeUnit = 'Jahre';
                    tMax = 30000;
                } else if (lambda === 0.693) {
                    timeUnit = 'Tage';
                    tMax = 20;
                }
            }

            // Slider anpassen
            document.getElementById('sliderT').max = tMax;
            document.getElementById('sliderT').value = 0;
            currentT = 0;
            maxDrawnT = 0;
            
            document.getElementById('halflifeUnit').textContent = timeUnit;
            document.getElementById('isotopeInfo').textContent = 'Î» = ' + lambda.toFixed(6) + ' pro ' + timeUnit.slice(0, -1);
            
            draw();
        });

        // Slider Event Listener
        document.getElementById('sliderT').addEventListener('input', (e) => {
            currentT = parseFloat(e.target.value);
            draw();
        });

        document.getElementById('sliderN0').addEventListener('input', (e) => {
            N0 = parseFloat(e.target.value);
            document.getElementById('n0Value').textContent = N0;
            maxDrawnT = currentT;  // Reset der Ableitungskurve
            draw();
        });

        // Initialisierung
        draw();
    </script>
</body>
</html>
